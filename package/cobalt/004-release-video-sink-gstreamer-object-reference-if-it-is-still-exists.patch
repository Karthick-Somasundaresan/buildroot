From 6997d77d7821bde34b5fd3ea9a6156ff08f20cf4 Mon Sep 17 00:00:00 2001
From: modeveci <o.deveci@metrological.com>
Date: Fri, 12 Mar 2021 10:52:59 +0100
Subject: [PATCH] release video-sink gstreamer object reference if it is still
 exists

---
 .../starboard/wpe/shared/player/player_internal.cc            | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/third_party/starboard/wpe/shared/player/player_internal.cc b/src/third_party/starboard/wpe/shared/player/player_internal.cc
index d5261ab52..a27697a41 100644
--- a/src/third_party/starboard/wpe/shared/player/player_internal.cc
+++ b/src/third_party/starboard/wpe/shared/player/player_internal.cc
@@ -961,6 +961,10 @@ PlayerImpl::~PlayerImpl() {
       g_source_remove(source_setup_id_);
     }
   }
+
+  if (video_sink_)
+    gst_object_unref(video_sink_);
+
   g_source_remove(bus_watch_id_);
   ChangePipelineState(GST_STATE_NULL);
   GstBus* bus = gst_pipeline_get_bus(GST_PIPELINE(pipeline_));
